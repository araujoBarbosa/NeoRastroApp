<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="light dark" />
  <meta name="theme-color" content="#1d4ed8" />
  <title>NeoRastro — Painel</title>

  <!-- Permitir comunicação com o backend -->
  <meta http-equiv="Content-Security-Policy" content="
    default-src 'self' data:;
    img-src 'self' data:;
    style-src 'self' 'unsafe-inline';
    script-src 'self' 'unsafe-inline';
    connect-src 'self' https://api.neorastro.cloud;
    base-uri 'self';
    form-action 'self';
    frame-ancestors 'none';
    upgrade-insecure-requests;
  ">

  <link rel="stylesheet" href="estilo.css" />
  <link rel="preconnect" href="https://unpkg.com" crossorigin />

  <!-- Leaflet CSS -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    crossorigin="anonymous"
  />
  <style>
    main { display:grid; grid-template-columns: 320px 1fr; gap:16px; }
    #mapa-rastreamento { height: calc(100vh - 90px); border-radius:12px; }
    .painel-lateral { background: var(--cartao,#111827); padding:12px; border-radius:12px; color:#e5e7eb; overflow:auto }
    .veiculo { display:flex; justify-content:space-between; align-items:center; margin-bottom:10px; padding:8px; background:#1f2937; border-radius:8px }
    .veiculo strong { display:block }
    .veiculo small { opacity:.8 }
    .grupo-botoes { display:flex; gap:6px; }
    button { border:0; padding:6px 10px; border-radius:8px; cursor:pointer; }
    .primario { background:#1d4ed8; color:#fff }
    .perigo { background:#b91c1c; color:#fff }
    .suave { background:#374151; color:#e5e7eb }
    #lista-comandos { margin-top:14px; font-size:.9rem; max-height:180px; overflow:auto; }
    #lista-comandos li { margin:4px 0; }
  </style>
</head>
<body class="pagina--painel">
  <header class="painel-header container">
    <div class="marca">
      <!-- ✅ Caminho relativo -->
      <img src="favicon.svg" alt="Logo NeoRastro" width="24" height="24" />
      <h1>NeoRastro — Painel</h1>
    </div>
    <div class="acoes-header">
      <span id="bem-vindo">Olá!</span>
      <button id="botao-sair" type="button">Sair</button>
    </div>
  </header>

  <main class="container" style="padding:0">
    <!-- Painel lateral com veículos e histórico -->
    <aside class="painel-lateral">
      <h2>Meus veículos</h2>
      <div id="lista-veiculos"></div>

      <h3 style="margin-top:16px">Histórico de comandos</h3>
      <ul id="lista-comandos"></ul>
      <button id="botao-atualizar-comandos" class="suave">Atualizar histórico</button>
    </aside>

    <!-- Mapa -->
    <div id="mapa-rastreamento" aria-label="Mapa de rastreamento"></div>
  </main>

  <div id="mensagem-aviso" class="aviso" role="status" aria-live="polite"></div>

  <!-- Leaflet JS -->
  <script
    src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
    crossorigin="anonymous"
  ></script>

  <!-- ✅ Script local -->
  <script src="painel.js"></script>
</body>
</html>

